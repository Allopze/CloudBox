# Server Configuration
NODE_ENV=development
PORT=3001

# Frontend URL (Vite dev server defaults to :5000 in this repo)
FRONTEND_URL=http://localhost:5000

# Database
# CloudBox uses PostgreSQL (see `backend/prisma/schema.prisma`)
# If you want a quick local DB/Redis, use the root docker-compose file:
#   docker-compose up -d postgres redis
#
# IMPORTANT: Do not put real credentials in this template.
DATABASE_URL="postgresql://cloudbox:cloudbox_dev_password@localhost:5432/cloudbox?schema=public"

# JWT Configuration (CHANGE THESE IN PRODUCTION!)
JWT_SECRET=dev-jwt-secret-change-in-production
JWT_REFRESH_SECRET=dev-refresh-secret-change-in-production
JWT_EXPIRES_IN=15m
JWT_REFRESH_EXPIRES_IN=7d

# Storage Configuration
# Where uploaded files/thumbnails/chunks live.
# Default (if unset) is `../data` (repo root `/data`).
STORAGE_PATH=../data
MAX_FILE_SIZE=1073741824
DEFAULT_QUOTA=5368709120

# Trash Configuration
TRASH_RETENTION_DAYS=30

# MIDI Rendering (local binaries and soundfont)
# Paths are relative to backend/ by default.
MIDI_SOUNDFONT_PATH=assets/soundfonts/FluidR3_GM.sf2
MIDI_FLUIDSYNTH_PATH=bin/fluidsynth/fluidsynth.exe
MIDI_SAMPLE_RATE=44100
MIDI_GAIN=1.0
MIDI_MP3_QUALITY=2
MIDI_RENDER_TIMEOUT_MS=300000

# Compression Configuration
# ZIP compression level: 0 (no compression) to 9 (max compression)
ZIP_COMPRESSION_LEVEL=5

# Google OAuth (optional)
GOOGLE_CLIENT_ID=
GOOGLE_CLIENT_SECRET=

# SMTP Configuration (optional)
# You can also configure SMTP via Admin UI (stored encrypted in DB).
SMTP_HOST=smtp.example.com
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=
SMTP_PASS=
SMTP_FROM=CloudBox <noreply@example.com>

# ===========================================
# Redis Configuration (optional but recommended)
# ===========================================
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0

# Enable/disable caching (default: true if Redis is available)
CACHE_ENABLED=true

# Maximum concurrent sessions per user (0 = unlimited)
MAX_SESSIONS_PER_USER=10

# ===========================================
# Queue Worker Configuration
# ===========================================
# For production, run the queue worker as a separate process:
#   npx tsx src/workers/queueWorker.ts (development)
#   node dist/workers/queueWorker.js (production)
TRANSCODING_FALLBACK_CONCURRENCY=2
THUMBNAIL_FALLBACK_CONCURRENCY=2
TRANSCODING_BULL_CONCURRENCY=2
THUMBNAIL_CONCURRENCY=4

# Rate limiting for thumbnail generation (per user)
THUMBNAIL_RATE_LIMIT_PER_HOUR=1000
THUMBNAIL_RATE_LIMIT_WINDOW_MS=3600000

# Worker-specific settings (for queueWorker.ts)
WORKER_CONCURRENCY=2
WORKER_TYPE=all
